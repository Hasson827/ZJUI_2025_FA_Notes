# 条件概率和独立性

## 条件概率

用如下方式可以推导出一个对于所有事件$E$和$F$都适用的计算$P(E|F)$的一办公室：如果$F$发生了，那么为了$E$发生，其结果必然是既属于$E$又属于$F$的一点，即这个结果必然属于$EF$。既然已知$F$已经发生，$F$成了新的样本空间，因此$E$发生的(条件)概率必然等于$EF$发生的概率与$F$发生的概率之比。也就是说，我们有如下定义：
$$
P(E|F) = \frac{P(EF)}{P(F)},\quad P(F)\gt0
$$
在该公式左右两边同时乘以$P(F)$，可以得到：
$$
P(EF)  = P(F)\cdot P(E|F)
$$
实际上这个公式可以继续推广成为**乘法规则**，它提供了任意多个事件交的概率的计算方法，即：
$$
P(E_{1}E_{2}\cdots E_{n}) = P(E_{1})P(E_{2}|E_{1})P(E_{3}|E_{1}E_{2})\cdots P(E_{n}|E_{1}E_{2}\cdots E_{n-1})
$$
总之，乘法法则是指，事件$E_{1},E_{2},\dots,E_{n}$同时发生的概率$P(E_{1}E_{2}\cdots E_{n})$等于事件$E_{1}$发生的概率$P(E_{1})$，乘以给定事件$E_{1}$发生的条件下事件$E_{2}$发生的条件概率$P(E_{2}|E_{1})$，乘以给定事件$E_{1},E_{2}$发生的条件下事件$E_{3}$发生的条件概率$P(E_{3}|E_{1}E_{2})$，以此类推。

## 贝叶斯公式

设$E$和$F$为两个事件，可以将$E$表示为
$$
E = EF\cup EF^{c}
$$
这样，$E$中的结果要么同时属于$E$和$F$，要么只属于$E$但是不属于$F$。显然，$EF$和$EF^{c}$是互不相容的，因此我们有：
$$
P(E)  = P(EF)+P(EF^{c}) = P(E|F)P(F)+P(E|F^{c})P(F^{c})
\\
=P(E|F)P(F)+P(E|F^{c})[1-P(F)]
$$
上式说明事件$E$发生的概率等于在$F$发生的条件下$E$的条件概率与在$F$不发生的条件下$E$发生的条件概率的加权平均，其中加在每个条件概率上的权重就是作为条件的事件发生的概率。这是一个极其有用的公式，它使得我们能够通过以第二个事件发生与否作为条件来计算第一个事件的概率。也就是说，在许多问题中，直接计算某个事件的概率很困难，但是一旦知道第二个事件发生与否，就容易计算了。

